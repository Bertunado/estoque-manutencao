{% extends "base.html" %}
{% load static %}

{% block content %}
<main class="flex-1 p-8">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">Configurações do Perfil</h1>
    <p class="text-gray-500 mb-6">Edite seu nome e e-mail para receber notificações.</p>

    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
      <form method="post" id="perfil-form" novalidate>
        {% csrf_token %}

        <div class="grid grid-cols-1 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
            {{ form.first_name }}
            {% if form.first_name.errors %}
              <p class="text-sm text-red-600 mt-1">{{ form.first_name.errors.0 }}</p>
            {% endif %}
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Sobrenome</label>
            {{ form.last_name }}
            {% if form.last_name.errors %}
              <p class="text-sm text-red-600 mt-1">{{ form.last_name.errors.0 }}</p>
            {% endif %}
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            {{ form.email }}
            {% if form.email.errors %}
              <p class="text-sm text-red-600 mt-1">{{ form.email.errors.0 }}</p>
            {% endif %}
          </div>
        </div>

        <div class="mt-6 flex items-center gap-3">
          <button type="submit"
                  class="px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700"
                  id="perfil-salvar-btn">
            Salvar
          </button>
          <a href="{% url 'estoque:estoque_lista' %}" class="text-gray-600 underline">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('perfil-form');
  if (!form) return;
  form.addEventListener('submit', () => {
    const btn = document.getElementById('perfil-salvar-btn');
    if (btn) { btn.disabled = true; btn.textContent = 'Salvando...'; }
  });
});
</script>
{% endblock %}